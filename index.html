<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>World Clocks - Timezone & Language Support</title>
<meta name="description" content="Display multiple world clocks with day/night mode, timezone info, language selection, and time difference calculation." />
<style>
  /* Reset & basic styling */
  body {
    font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    background: #f9f9f9;
    color: #222;
    margin: 0; padding: 0;
  }
  header {
    background: #fff;
    padding: 1rem 2rem;
    box-shadow: 0 2px 6px rgb(0 0 0 / 0.1);
    display: flex;
    justify-content: space-between;
    align-items: center;
  }
  h1 {
    font-weight: 700;
    margin: 0;
    font-size: 1.8rem;
  }
  main {
    max-width: 1100px;
    margin: 2rem auto;
    padding: 0 1rem;
  }
  .clocks-container {
    display: flex;
    flex-wrap: wrap;
    gap: 2rem;
    justify-content: center;
  }
  .clock-card {
    background: #fff;
    border: 2px solid #4a90e2;
    border-radius: 10px;
    width: 280px;
    padding: 1rem;
    box-shadow: 0 3px 8px rgb(0 0 0 / 0.1);
    text-align: center;
  }
  .clock-city {
    font-weight: 700;
    font-size: 1.2rem;
    margin-bottom: 0.2rem;
  }
  .clock-tz {
    font-size: 0.85rem;
    color: #666;
    margin-bottom: 1rem;
  }
  .digital-time {
    font-size: 1.5rem;
    font-weight: 600;
    letter-spacing: 1px;
    margin-bottom: 1rem;
  }
  /* Analog clock face */
  .analog-clock {
    position: relative;
    margin: 0 auto;
    width: 180px;
    height: 180px;
    border: 6px solid #4a90e2;
    border-radius: 50%;
    background: white;
  }
  .analog-clock .center-dot {
    position: absolute;
    background: #222;
    width: 12px;
    height: 12px;
    border-radius: 50%;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    z-index: 10;
  }
  .analog-clock .hand {
    position: absolute;
    background: #222;
    top: 50%;
    left: 50%;
    transform-origin: bottom center;
    transform-style: preserve-3d;
  }
  .analog-clock .hour-hand {
    width: 6px;
    height: 50px;
    border-radius: 3px;
    transform-origin: bottom center;
    z-index: 7;
  }
  .analog-clock .minute-hand {
    width: 4px;
    height: 70px;
    border-radius: 2px;
    z-index: 8;
  }
  .analog-clock .second-hand {
    width: 2px;
    height: 80px;
    background: #e74c3c;
    z-index: 9;
  }
  /* Numbers inside clock */
  .analog-clock .number {
    position: absolute;
    width: 24px;
    height: 24px;
    text-align: center;
    font-weight: 700;
    color: #222;
    user-select: none;
  }
  /* Controls and selections */
  .controls {
    margin: 2rem 0;
    display: flex;
    flex-wrap: wrap;
    gap: 1rem;
    justify-content: center;
  }
  select, button {
    padding: 0.5rem 1rem;
    font-size: 1rem;
    border-radius: 6px;
    border: 1px solid #bbb;
    cursor: pointer;
  }
  select {
    min-width: 200px;
  }
  button {
    background-color: #4a90e2;
    color: white;
    border: none;
  }
  button:hover {
    background-color: #357ABD;
  }
  /* Dark mode styles */
  body.dark-mode {
    background: #222;
    color: #eee;
  }
  body.dark-mode .clock-card {
    background: #333;
    border-color: #7f8c8d;
    box-shadow: 0 3px 8px rgb(0 0 0 / 0.7);
  }
  body.dark-mode .analog-clock {
    background: #444;
    border-color: #7f8c8d;
  }
  body.dark-mode .analog-clock .number {
    color: #eee;
  }
  body.dark-mode .digital-time {
    color: #ddd;
  }
</style>
</head>
<body>
<header>
  <h1>World Clocks</h1>
  <button id="modeToggle" aria-label="Toggle Day/Night Mode">ğŸŒ/ğŸŒ™</button>
</header>
<main>
  <section class="controls" aria-label="Clock controls">
    <select id="languageSelect" aria-label="Select Language"></select>
    <select id="cityAddSelect" aria-label="Add Clock City"></select>
    <button id="addClockBtn">Add Clock</button>
  </section>

  <section class="clocks-container" id="clocksContainer" aria-live="polite" aria-relevant="additions removals"></section>
</main>

<script>
  // Language data: English + 5 most spoken languages by native + total speakers
  const LANGUAGES = {
    en: { name: 'English', selectCity: 'Select a city', addClock: 'Add Clock' },
    zh: { name: 'ä¸­æ–‡ (Chinese)', selectCity: 'é€‰æ‹©åŸå¸‚', addClock: 'æ·»åŠ æ—¶é’Ÿ' },
    es: { name: 'EspaÃ±ol (Spanish)', selectCity: 'Seleccionar ciudad', addClock: 'Agregar reloj' },
    hi: { name: 'à¤¹à¤¿à¤¨à¥à¤¦à¥€ (Hindi)', selectCity: 'à¤¶à¤¹à¤° à¤šà¥à¤¨à¥‡à¤‚', addClock: 'à¤˜à¤¡à¤¼à¥€ à¤œà¥‹à¤¡à¤¼à¥‡à¤‚' },
    ar: { name: 'Ø§Ù„Ø¹Ø±Ø¨ÙŠØ© (Arabic)', selectCity: 'Ø§Ø®ØªØ± Ù…Ø¯ÙŠÙ†Ø©', addClock: 'Ø£Ø¶Ù Ø³Ø§Ø¹Ø©' },
    fr: { name: 'FranÃ§ais (French)', selectCity: 'SÃ©lectionner une ville', addClock: 'Ajouter une horloge' }
  };

  // Cities with timezone id, display name, and timezone string
  const cities = [
    { id: 'america_new_york', name: 'New York', tz: 'America/New_York' },
    { id: 'europe_london', name: 'London', tz: 'Europe/London' },
    { id: 'asia_tokyo', name: 'Tokyo', tz: 'Asia/Tokyo' },
    { id: 'asia_shanghai', name: 'Shanghai', tz: 'Asia/Shanghai' },
    { id: 'asia_delhi', name: 'Delhi', tz: 'Asia/Kolkata' },
    { id: 'europe_paris', name: 'Paris', tz: 'Europe/Paris' },
    { id: 'america_mexico_city', name: 'Mexico City', tz: 'America/Mexico_City' },
    { id: 'africa_cairo', name: 'Cairo', tz: 'Africa/Cairo' },
    { id: 'america_sao_paulo', name: 'SÃ£o Paulo', tz: 'America/Sao_Paulo' },
    { id: 'europe_moscow', name: 'Moscow', tz: 'Europe/Moscow' }
    // Add more cities if needed
  ];

  // Current clocks - start with default 3
  let currentClocks = ['america_new_york', 'europe_london', 'asia_tokyo'];

  // Current language - default English
  let currentLanguage = 'en';

  // Elements
  const languageSelect = document.getElementById('languageSelect');
  const cityAddSelect = document.getElementById('cityAddSelect');
  const addClockBtn = document.getElementById('addClockBtn');
  const clocksContainer = document.getElementById('clocksContainer');
  const modeToggle = document.getElementById('modeToggle');

  // Initialize language select options
  function populateLanguageSelect() {
    languageSelect.innerHTML = '';
    for (const [code, lang] of Object.entries(LANGUAGES)) {
      const opt = document.createElement('option');
      opt.value = code;
      opt.textContent = lang.name;
      if (code === currentLanguage) opt.selected = true;
      languageSelect.appendChild(opt);
    }
  }

  // Initialize city add select options (exclude current clocks)
  function populateCityAddSelect() {
    cityAddSelect.innerHTML = '';
    const placeholder = document.createElement('option');
    placeholder.value = '';
    placeholder.disabled = true;
    placeholder.selected = true;
    placeholder.textContent = LANGUAGES[currentLanguage].selectCity || 'Select a city';
    cityAddSelect.appendChild(placeholder);

    for (const city of cities) {
      if (currentClocks.includes(city.id)) continue; // skip already added
      const opt = document.createElement('option');
      opt.value = city.id;
      opt.textContent = city.name;
      cityAddSelect.appendChild(opt);
    }
  }

  // Convert tz name like 'America/New_York' to display string with UTC offset
  function getTimeZoneOffsetString(tz, date = new Date()) {
    try {
      const options = { timeZone: tz, timeZoneName: 'short' };
      const formatter = new Intl.DateTimeFormat('en-US', options);
      const parts = formatter.formatToParts(date);
      const tzNamePart = parts.find(p => p.type === 'timeZoneName');
      return tzNamePart ? tzNamePart.value : '';
    } catch {
      return '';
    }
  }
</script>
<script>
  // Get city data by id
  function getCityById(id) {
    return cities.find(c => c.id === id);
  }

  // Remove a clock by city id
  function removeClock(cityId) {
    currentClocks = currentClocks.filter(id => id !== cityId);
    renderClocks();
    populateCityAddSelect();
  }

  // Place numbers 1-12 evenly inside analog clock face
  function placeNumbersOnFace(clockFace) {
    // Remove old numbers
    clockFace.querySelectorAll('.number').forEach(n => n.remove());

    const radius = clockFace.clientWidth / 2;
    const centerX = radius;
    const centerY = radius;
    const numberRadius = radius * 0.8;

    for (let num = 1; num <= 12; num++) {
      const angle = (num * 30 - 90) * Math.PI / 180; // 30 degrees per number, -90 to start at top
      const x = centerX + numberRadius * Math.cos(angle) - 12; // 12 = half width of number div
      const y = centerY + numberRadius * Math.sin(angle) - 12;
      const numberElem = document.createElement('div');
      numberElem.className = 'number';
      numberElem.textContent = num;
      numberElem.style.left = `${x}px`;
      numberElem.style.top = `${y}px`;
      clockFace.appendChild(numberElem);
    }
  }

  // Render all clocks in currentClocks array
  function renderClocks() {
    clocksContainer.innerHTML = '';
    for (const cityId of currentClocks) {
      const city = getCityById(cityId);
      if (!city) continue;

      const card = document.createElement('div');
      card.className = 'clock-card';
      card.setAttribute('data-city-id', cityId);

      // City name and timezone
      const cityName = document.createElement('div');
      cityName.className = 'clock-city';
      cityName.textContent = city.name;
      card.appendChild(cityName);

      const tzInfo = document.createElement('div');
      tzInfo.className = 'clock-tz';
      tzInfo.textContent = `${city.tz} (${getTimeZoneOffsetString(city.tz)})`;
      card.appendChild(tzInfo);

      // Digital clock
      const digital = document.createElement('div');
      digital.className = 'digital-time';
      digital.setAttribute('aria-live', 'polite');
      digital.setAttribute('aria-label', `${city.name} digital clock`);
      card.appendChild(digital);

      // Analog clock
      const analog = document.createElement('div');
      analog.className = 'analog-clock';
      analog.setAttribute('aria-label', `${city.name} analog clock`);
      analog.setAttribute('role', 'img');

      // Create clock hands
      const hourHand = document.createElement('div');
      hourHand.className = 'hand hour-hand';
      const minuteHand = document.createElement('div');
      minuteHand.className = 'hand minute-hand';
      const secondHand = document.createElement('div');
      secondHand.className = 'hand second-hand';

      analog.appendChild(hourHand);
      analog.appendChild(minuteHand);
      analog.appendChild(secondHand);

      // Center dot
      const centerDot = document.createElement('div');
      centerDot.className = 'center-dot';
      analog.appendChild(centerDot);

      // Place numbers on clock face
      placeNumbersOnFace(analog);

      card.appendChild(analog);

      // Remove button
      if (currentClocks.length > 1) {
        const removeBtn = document.createElement('button');
        removeBtn.textContent = 'Remove';
        removeBtn.setAttribute('aria-label', `Remove clock for ${city.name}`);
        removeBtn.style.marginTop = '1rem';
        removeBtn.onclick = () => {
          removeClock(cityId);
        };
        card.appendChild(removeBtn);
      }

      clocksContainer.appendChild(card);
    }
  }

  // Update all clocks every second
  function updateAllTimes() {
    const now = new Date();

    for (const card of clocksContainer.querySelectorAll('.clock-card')) {
      const cityId = card.getAttribute('data-city-id');
      const city = getCityById(cityId);
      if (!city) continue;

      // Digital time update
      const digital = card.querySelector('.digital-time');
      const options = { timeZone: city.tz, hour: '2-digit', minute: '2-digit', second: '2-digit', hour12: false };
      digital.textContent = now.toLocaleTimeString(undefined, options);

      // Analog clock update
      const analog = card.querySelector('.analog-clock');
      const hourHand = analog.querySelector('.hour-hand');
      const minuteHand = analog.querySelector('.minute-hand');
      const secondHand = analog.querySelector('.second-hand');

      const cityTime = new Date(now.toLocaleString('en-US', { timeZone: city.tz }));

      let hour = cityTime.getHours();
      const minute = cityTime.getMinutes();
      const second = cityTime.getSeconds();

      // Calculate rotation degrees
      const hourDeg = (hour % 12) * 30 + minute * 0.5;
      const minuteDeg = minute * 6;
      const secondDeg = second * 6;

      hourHand.style.transform = `translate(-50%, -100%) rotate(${hourDeg}deg)`;
      minuteHand.style.transform = `translate(-50%, -100%) rotate(${minuteDeg}deg)`;
      secondHand.style.transform = `translate(-50%, -100%) rotate(${secondDeg}deg)`;
    }
  }

  // Add clock from dropdown
  function addClock() {
    const selectedCityId = cityAddSelect.value;
    if (!selectedCityId) return;
    if (!currentClocks.includes(selectedCityId)) {
      currentClocks.push(selectedCityId);
      renderClocks();
      populateCityAddSelect();
    }
  }

  // Change language and update UI texts
  function setLanguage(langCode) {
    if (!LANGUAGES[langCode]) return;
    currentLanguage = langCode;

    // Update selects and buttons text
    populateCityAddSelect();
    populateLanguageSelect();

    addClockBtn.textContent = LANGUAGES[langCode].addClock;

    // Update clocks container content (e.g. timezone labels could be localized if desired)
    renderClocks();
  }

  // Toggle Day/Night mode
  function toggleMode() {
    document.body.classList.toggle('dark-mode');
    // Save preference if you want here (e.g., localStorage)
  }

  // Event listeners
  addClockBtn.addEventListener('click', addClock);
  languageSelect.addEventListener('change', e => setLanguage(e.target.value));
  modeToggle.addEventListener('click', toggleMode);

  // Initialize on load
  populateLanguageSelect();
  populateCityAddSelect();
  renderClocks();
  updateAllTimes();

  // Update clocks every second
  setInterval(updateAllTimes, 1000);

</script>
calcTitle: {
  en: "Time Difference Calculator",
  es: "Calculadora de diferencia horaria",
  zh: "æ—¶å·®è®¡ç®—å™¨",
  hi: "à¤¸à¤®à¤¯ à¤…à¤‚à¤¤à¤° à¤•à¥ˆà¤²à¤•à¥à¤²à¥‡à¤Ÿà¤°",
  ar: "Ø­Ø§Ø³Ø¨Ø© ÙØ±Ù‚ Ø§Ù„ØªÙˆÙ‚ÙŠØª",
  fr: "Calculateur de diffÃ©rence horaire",
  ru: "ĞšĞ°Ğ»ÑŒĞºÑƒĞ»ÑÑ‚Ğ¾Ñ€ Ñ€Ğ°Ğ·Ğ½Ğ¸Ñ†Ñ‹ Ğ²Ğ¾ Ğ²Ñ€ĞµĞ¼ĞµĞ½Ğ¸"
},
calcCityA: {
  en: "City A:",
  es: "Ciudad A:",
  zh: "åŸå¸‚ A:",
  hi: "à¤¶à¤¹à¤° A:",
  ar: "Ø§Ù„Ù…Ø¯ÙŠÙ†Ø© Ø£:",
  fr: "Ville A:",
  ru: "Ğ“Ğ¾Ñ€Ğ¾Ğ´ Ğ:"
},
calcCityB: {
  en: "City B:",
  es: "Ciudad B:",
  zh: "åŸå¸‚ B:",
  hi: "à¤¶à¤¹à¤° B:",
  ar: "Ø§Ù„Ù…Ø¯ÙŠÙ†Ø© Ø¨:",
  fr: "Ville B:",
  ru: "Ğ“Ğ¾Ñ€Ğ¾Ğ´ Ğ‘:"
},
calcDate: {
  en: "Date:",
  es: "Fecha:",
  zh: "æ—¥æœŸï¼š",
  hi: "à¤¤à¤¾à¤°à¥€à¤–:",
  ar: "Ø§Ù„ØªØ§Ø±ÙŠØ®:",
  fr: "Date :",
  ru: "Ğ”Ğ°Ñ‚Ğ°:"
},
calcTime: {
  en: "Time (24h):",
  es: "Hora (24h):",
  zh: "æ—¶é—´ (24å°æ—¶åˆ¶):",
  hi: "à¤¸à¤®à¤¯ (24 à¤˜à¤‚à¤Ÿà¥‡):",
  ar: "Ø§Ù„ÙˆÙ‚Øª (24 Ø³Ø§Ø¹Ø©):",
  fr: "Heure (24h) :",
  ru: "Ğ’Ñ€ĞµĞ¼Ñ (24Ñ‡):"
},
calcButton: {
  en: "Calculate Difference",
  es: "Calcular diferencia",
  zh: "è®¡ç®—å·®å¼‚",
  hi: "à¤…à¤‚à¤¤à¤° à¤•à¥€ à¤—à¤£à¤¨à¤¾ à¤•à¤°à¥‡à¤‚",
  ar: "Ø§Ø­Ø³Ø¨ Ø§Ù„ÙØ±Ù‚",
  fr: "Calculer la diffÃ©rence",
  ru: "Ğ’Ñ‹Ñ‡Ğ¸ÑĞ»Ğ¸Ñ‚ÑŒ Ñ€Ğ°Ğ·Ğ½Ğ¸Ñ†Ñƒ"
},
invalidSelection: {
  en: "Invalid city selection",
  es: "SelecciÃ³n de ciudad invÃ¡lida",
  zh: "æ— æ•ˆçš„åŸå¸‚é€‰æ‹©",
  hi: "à¤…à¤®à¤¾à¤¨à¥à¤¯ à¤¶à¤¹à¤° à¤šà¤¯à¤¨",
  ar: "Ø§Ø®ØªÙŠØ§Ø± Ù…Ø¯ÙŠÙ†Ø© ØºÙŠØ± ØµØ§Ù„Ø­",
  fr: "SÃ©lection de ville invalide",
  ru: "ĞĞµĞ²ĞµÑ€Ğ½Ñ‹Ğ¹ Ğ²Ñ‹Ğ±Ğ¾Ñ€ Ğ³Ğ¾Ñ€Ğ¾Ğ´Ğ°"
},
invalidDate: {
  en: "Please select a date",
  es: "Por favor seleccione una fecha",
  zh: "è¯·é€‰æ‹©æ—¥æœŸ",
  hi: "à¤•à¥ƒà¤ªà¤¯à¤¾ à¤¤à¤¾à¤°à¥€à¤– à¤šà¥à¤¨à¥‡à¤‚",
  ar: "ÙŠØ±Ø¬Ù‰ ØªØ­Ø¯ÙŠØ¯ Ø§Ù„ØªØ§Ø±ÙŠØ®",
  fr: "Veuillez sÃ©lectionner une date",
  ru: "ĞŸĞ¾Ğ¶Ğ°Ğ»ÑƒĞ¹ÑÑ‚Ğ°, Ğ²Ñ‹Ğ±ĞµÑ€Ğ¸Ñ‚Ğµ Ğ´Ğ°Ñ‚Ñƒ"
}
